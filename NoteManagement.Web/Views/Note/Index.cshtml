@using NoteManagement.Core.DTOs.Note;
@model List<NoteDto>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<table class="table">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Title</th>
        </tr>
    </thead>

    <tbody>

        @foreach (var item in Model)
        {
            <tr>

                <th scope="row">@item.Id</th>
                <td>@item.ParentNoteId</td>
                <td>@item.Title</td>
                <td>@item.Text</td>
                <td>@item.CreatedDate</td>
                <td>@item.IsDeleted</td>

                <td>  <a class="btn btn-warning" asp-controller="Note" asp-action="Update" asp-route-id="@item.Id">Update</a> </td>
                <td>  <a class="btn btn-success" asp-controller="Note" asp-action="Detail" asp-route-id="@item.Id">Detail</a> </td>
                <td> <button class="btn btn-outline-danger" onclick="deletedNote(@item.Id)">Sil</button> </td>
            
            </tr>
        }


    </tbody>
</table>


<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    function deletedNote(id) {
        Swal.fire({
            title: 'Emin misiniz !',
            text: "Are you sure you want to delete?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'yes, Delete',
            cancelButtonText: "No",
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    type: "post",
                    url: "/Note/Remove/" + id,
                    success: function (func) {
                        Swal.fire(
                            'Deleted ! ',
                            'Successfully deleted',
                            'success'
                        )
                        setTimeout('', 3000);
                        location.reload();
                    }
                }
                )
            }
        })
    }
</script>